<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kurikulum Teknik Elektro S1 â€” Interactive</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@700;800&family=DM+Mono:wght@400;500&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #050709;
  --s1: #0d1117;
  --s2: #161c24;
  --border: #1f2937;
  --border2: #2d3748;
  --y1: #22d3ee;   /* year 1 - cyan */
  --y2: #a78bfa;   /* year 2 - violet */
  --y3: #fb923c;   /* year 3 - orange */
  --y4: #34d399;   /* year 4 - emerald */
  --txt: #e2e8f0;
  --muted: #64748b;
  --muted2: #94a3b8;
  --white: #ffffff;
  --diff-easy: #34d399;
  --diff-med: #fbbf24;
  --diff-hard: #f87171;
  --diff-boss: #e879f9;
}
*{margin:0;padding:0;box-sizing:border-box}
html{scroll-behavior:smooth}
body{
  background:var(--bg);
  color:var(--txt);
  font-family:'DM Sans',sans-serif;
  font-weight:300;
  min-height:100vh;
  overflow-x:hidden;
}

/* â”€â”€â”€ NOISE TEXTURE â”€â”€â”€ */
body::after{
  content:'';
  position:fixed;inset:0;
  background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.03'/%3E%3C/svg%3E");
  pointer-events:none;z-index:999;opacity:.4;
}

/* â”€â”€â”€ HEADER â”€â”€â”€ */
.hero{
  padding:48px 24px 0;
  text-align:center;
  position:relative;
}
.hero-chip{
  display:inline-flex;align-items:center;gap:6px;
  font-family:'DM Mono',monospace;font-size:10px;letter-spacing:3px;
  color:var(--y1);text-transform:uppercase;
  border:1px solid rgba(34,211,238,.2);
  padding:5px 12px;border-radius:100px;
  background:rgba(34,211,238,.05);
  margin-bottom:20px;
}
h1{
  font-family:'Syne',sans-serif;
  font-size:clamp(2rem,5vw,3.5rem);
  font-weight:800;
  letter-spacing:-1px;
  line-height:1.05;
  background:linear-gradient(135deg,#fff 0%,var(--y1) 50%,var(--y2) 100%);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;
  margin-bottom:12px;
}
.hero-sub{
  font-family:'DM Mono',monospace;font-size:11px;
  color:var(--muted);letter-spacing:2px;margin-bottom:32px;
}

/* â”€â”€â”€ NAV TABS â”€â”€â”€ */
.nav-tabs{
  display:flex;justify-content:center;gap:4px;flex-wrap:wrap;
  padding:0 16px 32px;
  position:sticky;top:0;z-index:100;
  background:linear-gradient(var(--bg) 85%,transparent);
  padding-top:16px;
}
.tab{
  display:flex;align-items:center;gap:6px;
  padding:9px 18px;border-radius:8px;
  border:1px solid var(--border);
  background:var(--s1);
  color:var(--muted2);
  font-family:'DM Mono',monospace;font-size:11px;letter-spacing:.5px;
  cursor:pointer;transition:all .2s;white-space:nowrap;
}
.tab:hover{border-color:var(--border2);color:var(--txt)}
.tab.active{background:var(--s2);border-color:var(--y1);color:var(--y1)}
.tab-icon{font-size:13px}

/* â”€â”€â”€ VIEWS â”€â”€â”€ */
.view{display:none;animation:fadeUp .3s ease}
.view.active{display:block}
@keyframes fadeUp{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   VIEW 1 â€” ROADMAP
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.roadmap{padding:0 16px 60px;max-width:900px;margin:0 auto}

.year-header{
  display:flex;align-items:center;gap:12px;margin:32px 0 16px;
}
.year-pill{
  font-family:'Syne',sans-serif;font-weight:800;font-size:.8rem;
  padding:5px 14px;border-radius:6px;
  background:rgba(0,0,0,.4);border:1px solid currentColor;
  letter-spacing:1px;
}
.year-line{flex:1;height:1px;background:var(--border)}
.year-label-txt{font-family:'DM Mono',monospace;font-size:10px;color:var(--muted);letter-spacing:2px;white-space:nowrap}

.sem-row{
  display:grid;grid-template-columns:72px 1fr;gap:0;
  margin-bottom:8px;
}
.sem-spine{
  display:flex;flex-direction:column;align-items:center;
  padding-top:20px;
}
.sem-dot{
  width:36px;height:36px;border-radius:50%;
  display:flex;align-items:center;justify-content:center;
  font-family:'Syne',sans-serif;font-weight:800;font-size:.75rem;
  border:2px solid currentColor;background:var(--bg);
  flex-shrink:0;position:relative;z-index:1;
}
.sem-line{flex:1;width:2px;background:var(--border);margin-top:4px}

.sem-card{
  border:1px solid var(--border);border-radius:12px;
  background:var(--s1);margin-left:8px;margin-bottom:4px;
  overflow:hidden;
}
.sem-card-head{
  display:flex;align-items:center;gap:10px;
  padding:14px 16px;cursor:pointer;
  border-bottom:1px solid transparent;
  transition:border-color .2s;
}
.sem-card.open .sem-card-head{border-bottom-color:var(--border)}
.sem-title-txt{font-family:'Syne',sans-serif;font-weight:700;font-size:.95rem;flex:1;color:var(--white)}
.sem-sks-badge{
  font-family:'DM Mono',monospace;font-size:10px;
  padding:3px 8px;border-radius:4px;
  background:rgba(255,255,255,.05);color:var(--muted2);
  border:1px solid var(--border);
}
.chevron{font-size:10px;color:var(--muted);transition:transform .2s}
.sem-card.open .chevron{transform:rotate(180deg)}

/* Subject cards inside semester */
.mk-list{
  display:none;
  grid-template-columns:repeat(auto-fill,minmax(260px,1fr));
  gap:8px;padding:14px;
}
.sem-card.open .mk-list{display:grid}

.mk-card{
  border:1px solid var(--border);border-radius:8px;
  padding:12px 12px 10px;
  background:var(--bg);
  position:relative;overflow:hidden;
  cursor:pointer;
  transition:all .2s;
}
.mk-card:hover{border-color:var(--border2);transform:translateY(-1px)}
.mk-card.selected{border-color:var(--y1)!important;background:rgba(34,211,238,.04)}

.mk-card::before{
  content:'';position:absolute;top:0;left:0;right:0;height:2px;
  background:var(--accent,var(--y1));
}
.mk-name{font-size:12.5px;font-weight:500;color:var(--white);margin-bottom:6px;line-height:1.3;padding-right:36px}
.mk-topics{font-size:11px;color:var(--muted2);line-height:1.5;margin-bottom:8px}

/* Difficulty bar */
.diff-row{display:flex;align-items:center;gap:6px;margin-bottom:7px}
.diff-label{font-family:'DM Mono',monospace;font-size:9px;color:var(--muted);letter-spacing:1px;width:48px}
.diff-bars{display:flex;gap:2px}
.diff-bar{width:14px;height:4px;border-radius:2px;background:var(--border2)}
.diff-bar.filled{background:var(--diff-color)}

/* Tools chips */
.tools-row{display:flex;gap:4px;flex-wrap:wrap;margin-bottom:6px}
.tool-chip{
  font-family:'DM Mono',monospace;font-size:9px;
  padding:2px 6px;border-radius:3px;
  background:rgba(167,139,250,.08);
  border:1px solid rgba(167,139,250,.2);
  color:var(--y2);letter-spacing:.3px;
}

/* Resource link */
.mk-res{
  font-family:'DM Mono',monospace;font-size:9px;
  color:var(--y1);letter-spacing:.5px;
  text-decoration:none;
  display:inline-flex;align-items:center;gap:4px;
  opacity:.7;transition:opacity .2s;
}
.mk-res:hover{opacity:1}

/* Tags */
.mk-tags{display:flex;gap:3px;flex-wrap:wrap;margin-bottom:6px}
.mk-tag{
  font-family:'DM Mono',monospace;font-size:9px;
  padding:2px 6px;border-radius:3px;letter-spacing:.3px;
}
.t-math{background:rgba(168,85,247,.1);color:#c084fc;border:1px solid rgba(168,85,247,.2)}
.t-elec{background:rgba(34,211,238,.08);color:var(--y1);border:1px solid rgba(34,211,238,.15)}
.t-lab{background:rgba(52,211,153,.08);color:#6ee7b7;border:1px solid rgba(52,211,153,.15)}
.t-soft{background:rgba(251,146,60,.08);color:#fdba74;border:1px solid rgba(251,146,60,.15)}
.t-digital{background:rgba(251,191,36,.08);color:#fde68a;border:1px solid rgba(251,191,36,.15)}
.t-pick{background:rgba(232,121,249,.08);color:#f0abfc;border:1px solid rgba(232,121,249,.15)}

.mk-sks{
  position:absolute;top:10px;right:10px;
  font-family:'DM Mono',monospace;font-size:9px;
  color:var(--muted);letter-spacing:1px;
}

/* Dependency tooltip */
.dep-badge{
  position:absolute;bottom:8px;right:10px;
  font-family:'DM Mono',monospace;font-size:9px;
  color:var(--y2);opacity:.6;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   VIEW 2 â€” DEPENDENCY GRAPH
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.dep-view{padding:16px 16px 60px;max-width:1000px;margin:0 auto}
.dep-intro{
  font-size:12px;color:var(--muted2);text-align:center;
  font-family:'DM Mono',monospace;letter-spacing:.5px;
  margin-bottom:24px;padding:12px;
  border:1px solid var(--border);border-radius:8px;
  background:var(--s1);
}
.dep-intro span{color:var(--y1)}

.dep-canvas-wrap{
  overflow-x:auto;
  border:1px solid var(--border);border-radius:12px;
  background:var(--s1);
  padding:20px 16px;
}
canvas#depCanvas{
  display:block;margin:0 auto;
  cursor:grab;
}
canvas#depCanvas:active{cursor:grabbing}

.dep-legend{
  display:flex;gap:12px;flex-wrap:wrap;justify-content:center;
  margin-top:16px;
  font-family:'DM Mono',monospace;font-size:10px;color:var(--muted2);
}
.dep-leg-item{display:flex;align-items:center;gap:6px}
.dep-leg-dot{width:10px;height:10px;border-radius:50%}

/* Tooltip */
#tooltip{
  position:fixed;
  background:var(--s2);border:1px solid var(--border2);
  border-radius:8px;padding:10px 12px;
  font-size:11px;color:var(--txt);
  pointer-events:none;z-index:9999;
  max-width:200px;line-height:1.5;
  display:none;
  font-family:'DM Sans',sans-serif;
}
#tooltip strong{color:var(--white);font-size:12px;display:block;margin-bottom:4px}
#tooltip .tt-deps{color:var(--y2);font-family:'DM Mono',monospace;font-size:10px}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   VIEW 3 â€” CAREER MAP
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.career-view{padding:16px 16px 60px;max-width:960px;margin:0 auto}

.career-intro{
  display:grid;grid-template-columns:1fr;gap:8px;
  margin-bottom:24px;
  font-family:'DM Mono',monospace;font-size:11px;color:var(--muted2);
  text-align:center;
  border:1px solid var(--border);border-radius:8px;
  padding:14px;background:var(--s1);
  letter-spacing:.5px;
}
.career-intro span{color:var(--y3)}

.career-grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(280px,1fr));
  gap:14px;
}

.career-card{
  border:1px solid var(--border);border-radius:12px;
  background:var(--s1);overflow:hidden;
  transition:all .25s;
}
.career-card:hover{border-color:var(--border2);transform:translateY(-2px)}

.career-head{
  padding:16px;
  border-bottom:1px solid var(--border);
  position:relative;overflow:hidden;
}
.career-head::before{
  content:'';position:absolute;top:-30px;right:-30px;
  width:80px;height:80px;border-radius:50%;
  background:var(--career-color,var(--y3));
  opacity:.07;
}
.career-icon{font-size:1.6rem;margin-bottom:8px;display:block}
.career-title{
  font-family:'Syne',sans-serif;font-weight:800;
  font-size:1rem;color:var(--white);margin-bottom:4px;
}
.career-salary{
  font-family:'DM Mono',monospace;font-size:10px;
  color:var(--career-color,var(--y3));letter-spacing:1px;
}

.career-body{padding:14px}

.career-section-title{
  font-family:'DM Mono',monospace;font-size:9px;
  letter-spacing:2px;text-transform:uppercase;
  color:var(--muted);margin-bottom:8px;
}

.career-mks{display:flex;flex-wrap:wrap;gap:4px;margin-bottom:12px}
.career-mk{
  font-family:'DM Mono',monospace;font-size:9px;
  padding:3px 7px;border-radius:4px;
  background:rgba(255,255,255,.04);
  border:1px solid var(--border2);
  color:var(--muted2);
  cursor:default;
  transition:.2s;
}
.career-mk.key{
  background:rgba(34,211,238,.06);
  border-color:rgba(34,211,238,.2);
  color:var(--y1);
}

.career-companies{
  display:flex;flex-wrap:wrap;gap:4px;
}
.company-tag{
  font-family:'DM Mono',monospace;font-size:9px;
  padding:2px 7px;border-radius:3px;
  background:var(--bg);border:1px solid var(--border);
  color:var(--muted2);
}

/* â”€â”€â”€ MOBILE â”€â”€â”€ */
@media(max-width:640px){
  h1{font-size:1.8rem}
  .mk-list{grid-template-columns:1fr}
  .career-grid{grid-template-columns:1fr}
  .sem-row{grid-template-columns:52px 1fr}
  .sem-dot{width:28px;height:28px;font-size:.65rem}
  canvas#depCanvas{width:100%!important;height:auto!important}
  .nav-tabs{gap:3px}
  .tab{padding:8px 12px;font-size:10px}
}
</style>
</head>
<body>

<div id="tooltip"></div>

<div class="hero">
  <div class="hero-chip">âš¡ Interactive Guide</div>
  <h1>Teknik Elektro S1</h1>
  <p class="hero-sub">8 Semester Â· ~144 SKS Â· Roadmap Lengkap</p>
</div>

<div class="nav-tabs">
  <div class="tab active" onclick="switchView('roadmap')"><span class="tab-icon">ğŸ—ºï¸</span> Roadmap</div>
  <div class="tab" onclick="switchView('dependency')"><span class="tab-icon">ğŸ”—</span> Dependency Graph</div>
  <div class="tab" onclick="switchView('career')"><span class="tab-icon">ğŸš€</span> Jalur Karir</div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â• VIEW 1: ROADMAP â•â•â•â•â•â•â•â•â•â• -->
<div class="view active" id="view-roadmap">
<div class="roadmap" id="roadmap-container"></div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â• VIEW 2: DEPENDENCY â•â•â•â•â•â•â•â•â•â• -->
<div class="view" id="view-dependency">
<div class="dep-view">
  <div class="dep-intro">Klik node untuk highlight prereq Â· <span>Panah = mata kuliah ini butuh MK sebelumnya</span> Â· Drag untuk navigasi</div>
  <div class="dep-canvas-wrap">
    <canvas id="depCanvas" width="860" height="600"></canvas>
  </div>
  <div class="dep-legend">
    <div class="dep-leg-item"><div class="dep-leg-dot" style="background:var(--y1)"></div>Tahun 1</div>
    <div class="dep-leg-item"><div class="dep-leg-dot" style="background:var(--y2)"></div>Tahun 2</div>
    <div class="dep-leg-item"><div class="dep-leg-dot" style="background:var(--y3)"></div>Tahun 3</div>
    <div class="dep-leg-item"><div class="dep-leg-dot" style="background:var(--y4)"></div>Tahun 4</div>
  </div>
</div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â• VIEW 3: CAREER â•â•â•â•â•â•â•â•â•â• -->
<div class="view" id="view-career">
<div class="career-view">
  <div class="career-intro">Pilih jalur karir yang cocok berdasarkan mata kuliah favoritmu Â· <span>MK kunci ditandai warna</span></div>
  <div class="career-grid" id="career-grid"></div>
</div>
</div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// DATA
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const MK = [
  // Semester 1
  {id:'kal1',sem:1,name:'Kalkulus 1',sks:3,topics:'Limit, turunan, integral, fungsi transenden',diff:2,tools:['Wolfram Alpha','GeoGebra'],res:'https://www.youtube.com/results?search_query=kalkulus+1+kuliah',tags:['t-math'],prereqs:[],year:1,accent:'var(--y1)'},
  {id:'aljabar',sem:1,name:'Aljabar Linear',sks:3,topics:'Vektor, matriks, eigenvalue, transformasi linear',diff:2,tools:['MATLAB','NumPy'],res:'https://www.youtube.com/watch?v=JnTa9XtvmfI',tags:['t-math'],prereqs:[],year:1,accent:'var(--y1)'},
  {id:'fis1',sem:1,name:'Fisika Dasar 1',sks:3,topics:'Mekanika, kinematika, dinamika, energi',diff:2,tools:['PhET Simulator'],res:'https://phet.colorado.edu',tags:['t-elec'],prereqs:[],year:1,accent:'var(--y1)'},
  {id:'prog1',sem:1,name:'Pengantar Teknik Elektro',sks:3,topics:'Ruang lingkup elektro, profesi insinyur',diff:1,tools:[],res:'',tags:['t-elec'],prereqs:[],year:1,accent:'var(--y1)'},
  // Semester 2
  {id:'kal2',sem:2,name:'Kalkulus 2',sks:3,topics:'Integral lipat, deret, fungsi multivariabel',diff:3,tools:['Wolfram Alpha','MATLAB'],res:'https://www.youtube.com/results?search_query=kalkulus+2+kuliah',tags:['t-math'],prereqs:['kal1'],year:1,accent:'var(--y1)'},
  {id:'fis2',sem:2,name:'Fisika Dasar 2',sks:3,topics:'Listrik, magnet, optik, termodinamika',diff:2,tools:['PhET Simulator'],res:'https://phet.colorado.edu',tags:['t-elec'],prereqs:['fis1'],year:1,accent:'var(--y1)'},
  {id:'code',sem:2,name:'Pemrograman Komputer',sks:3,topics:'Algoritma, C/Python, array, fungsi, OOP dasar',diff:2,tools:['VS Code','Python','GCC'],res:'https://www.learnpython.org',tags:['t-digital'],prereqs:[],year:1,accent:'var(--y1)'},
  {id:'kimia',sem:2,name:'Kimia Dasar',sks:3,topics:'Ikatan kimia, elektrokimia, material semikonduktor',diff:2,tools:[],res:'',tags:['t-math'],prereqs:[],year:1,accent:'var(--y1)'},
  // Semester 3
  {id:'mattek1',sem:3,name:'Matematika Teknik 1',sks:3,topics:'PDB, solusi analitik, sistem diferensial',diff:3,tools:['MATLAB','Wolfram Alpha'],res:'https://www.youtube.com/results?search_query=persamaan+diferensial+teknik',tags:['t-math'],prereqs:['kal2'],year:2,accent:'var(--y2)'},
  {id:'rl1',sem:3,name:'Rangkaian Listrik 1',sks:3,topics:'Hukum Ohm, KVL/KCL, Thevenin, Norton, DC',diff:3,tools:['LTspice','Multisim'],res:'https://www.falstad.com/circuit/',tags:['t-elec'],prereqs:['fis2'],year:2,accent:'var(--y2)'},
  {id:'elek1',sem:3,name:'Elektronika 1 (Analog)',sks:3,topics:'Dioda, BJT, MOSFET, bias, titik kerja',diff:3,tools:['LTspice','SPICE'],res:'https://www.youtube.com/results?search_query=elektronika+analog+transistor',tags:['t-elec'],prereqs:['fis2','rl1'],year:2,accent:'var(--y2)'},
  {id:'emag1',sem:3,name:'Elektromagnetika 1',sks:3,topics:'Hukum Coulomb, Gauss, Biot-Savart, potensial',diff:4,tools:['COMSOL Lite','FEMM'],res:'https://www.youtube.com/results?search_query=electromagnetics+engineering',tags:['t-elec'],prereqs:['kal2','fis2'],year:2,accent:'var(--y2)'},
  {id:'digital',sem:3,name:'Sistem Digital & Logika',sks:3,topics:'Gerbang logika, K-map, flip-flop, counter',diff:2,tools:['Logisim','Digital Works'],res:'https://www.nandgame.com',tags:['t-digital'],prereqs:['code'],year:2,accent:'var(--y2)'},
  // Semester 4
  {id:'mattek2',sem:4,name:'Matematika Teknik 2',sks:3,topics:'Laplace, Fourier, fungsi kompleks',diff:4,tools:['MATLAB','Wolfram'],res:'https://www.youtube.com/results?search_query=transformasi+laplace+teknik',tags:['t-math'],prereqs:['mattek1'],year:2,accent:'var(--y2)'},
  {id:'rl2',sem:4,name:'Rangkaian Listrik 2',sks:3,topics:'Rangkaian AC, fasor, resonansi, filter pasif',diff:3,tools:['LTspice','Oscilloscope'],res:'https://www.falstad.com/circuit/',tags:['t-elec'],prereqs:['rl1','mattek1'],year:2,accent:'var(--y2)'},
  {id:'ss',sem:4,name:'Sinyal & Sistem',sks:3,topics:'LTI, konvolusi, Fourier series, Z-transform',diff:4,tools:['MATLAB','Python SciPy'],res:'https://www.youtube.com/results?search_query=signals+systems+oppenheim',tags:['t-elec'],prereqs:['mattek2','rl2'],year:2,accent:'var(--y2)'},
  {id:'elek2',sem:4,name:'Elektronika 2 (Lanjut)',sks:3,topics:'Op-Amp, feedback, osilator, filter aktif',diff:3,tools:['LTspice','Multisim'],res:'https://www.youtube.com/results?search_query=op+amp+electronics',tags:['t-elec'],prereqs:['elek1'],year:2,accent:'var(--y2)'},
  {id:'mesin',sem:4,name:'Mesin Listrik',sks:3,topics:'Transformator, motor DC/AC, generator',diff:3,tools:['MATLAB Simulink'],res:'https://www.youtube.com/results?search_query=mesin+listrik+transformer',tags:['t-elec'],prereqs:['rl2','emag1'],year:2,accent:'var(--y2)'},
  // Semester 5
  {id:'kendali',sem:5,name:'Sistem Kendali',sks:3,topics:'Fungsi alih, root locus, stabilitas, PID',diff:4,tools:['MATLAB Control TB','Simulink'],res:'https://ctms.engin.umich.edu',tags:['t-elec'],prereqs:['mattek2','ss'],year:3,accent:'var(--y3)'},
  {id:'mikro',sem:5,name:'Elektronika Digital & Mikro',sks:3,topics:'Arsitektur CPU, assembly, mikrokontroler',diff:3,tools:['Arduino IDE','STM32','Keil'],res:'https://www.arduino.cc/en/Tutorial',tags:['t-digital'],prereqs:['digital','code'],year:3,accent:'var(--y3)'},
  {id:'telkom',sem:5,name:'Dasar Telekomunikasi',sks:3,topics:'Modulasi AM/FM/PM, bandwidth, noise, SNR',diff:3,tools:['MATLAB Comms TB','GNURadio'],res:'https://www.youtube.com/results?search_query=telekomunikasi+modulasi',tags:['t-elec'],prereqs:['ss'],year:3,accent:'var(--y3)'},
  {id:'tenaga',sem:5,name:'Sistem Tenaga Listrik',sks:3,topics:'3-fasa, transmisi, distribusi, diagram satu garis',diff:3,tools:['ETAP','PowerWorld','PSCAD'],res:'https://www.youtube.com/results?search_query=power+system+3+phase',tags:['t-elec'],prereqs:['rl2','mesin'],year:3,accent:'var(--y3)'},
  {id:'emag2',sem:5,name:'Elektromagnetika 2',sks:3,topics:'Maxwell, gelombang EM, antena, waveguide',diff:4,tools:['HFSS','CST Studio'],res:'https://www.youtube.com/results?search_query=maxwell+equations+engineering',tags:['t-elec'],prereqs:['emag1','mattek2'],year:3,accent:'var(--y3)'},
  // Semester 6
  {id:'eldaya',sem:6,name:'Elektronika Daya',sks:3,topics:'Rectifier, inverter, DC-DC converter, PWM',diff:4,tools:['PSIM','PLECS','Simulink'],res:'https://www.youtube.com/results?search_query=power+electronics+mohan',tags:['t-elec'],prereqs:['elek2','mesin'],year:3,accent:'var(--y3)'},
  {id:'dsp',sem:6,name:'Pengolahan Sinyal Digital',sks:3,topics:'FFT, filter FIR/IIR, desain filter digital',diff:4,tools:['MATLAB DSP TB','Python SciPy'],res:'https://www.dspguide.com',tags:['t-elec'],prereqs:['ss','mattek2'],year:3,accent:'var(--y3)'},
  {id:'komdig',sem:6,name:'Komunikasi Digital',sks:3,topics:'PCM, QAM, OFDM, BER, kapasitas Shannon',diff:4,tools:['MATLAB Comms TB','GNURadio'],res:'https://www.youtube.com/results?search_query=digital+communications+proakis',tags:['t-elec'],prereqs:['telkom','ss'],year:3,accent:'var(--y3)'},
  {id:'kendaliadv',sem:6,name:'Sistem Kendali Lanjut',sks:3,topics:'State space, observer, optimal, Bode, Nyquist',diff:5,tools:['MATLAB','Simulink'],res:'https://ctms.engin.umich.edu',tags:['t-elec'],prereqs:['kendali'],year:3,accent:'var(--y3)'},
  // Semester 7
  {id:'ml',sem:7,name:'Machine Learning untuk TE',sks:3,topics:'Neural network, CNN, klasifikasi sinyal & citra',diff:4,tools:['Python','TensorFlow','PyTorch'],res:'https://www.fast.ai',tags:['t-pick'],prereqs:['dsp','code'],year:4,accent:'var(--y4)'},
  {id:'iot',sem:7,name:'Internet of Things (IoT)',sks:3,topics:'MQTT, sensor, cloud, edge computing, keamanan',diff:3,tools:['Node-RED','AWS IoT','MQTT'],res:'https://www.youtube.com/results?search_query=IoT+tutorial',tags:['t-pick'],prereqs:['mikro','code'],year:4,accent:'var(--y4)'},
  {id:'ebt',sem:7,name:'Energi Terbarukan',sks:3,topics:'PLTS, turbin angin, sel bahan bakar, grid',diff:3,tools:['PVsyst','HOMER','SAM'],res:'https://www.nrel.gov/learning',tags:['t-pick'],prereqs:['tenaga','eldaya'],year:4,accent:'var(--y4)'},
  {id:'robotik',sem:7,name:'Robotika & Otomasi Industri',sks:3,topics:'Kinematika robot, PLC, SCADA, ROS',diff:4,tools:['ROS','MATLAB Robotics TB','ABB'],res:'https://www.ros.org/about-ros/',tags:['t-pick'],prereqs:['kendali','mikro'],year:4,accent:'var(--y4)'},
  {id:'magang',sem:7,name:'Kerja Praktik / Magang',sks:3,topics:'Implementasi industri, laporan, presentasi',diff:2,tools:[],res:'',tags:['t-soft'],prereqs:[],year:4,accent:'var(--y4)'},
  // Semester 8
  {id:'seminar',sem:8,name:'Seminar & Metodologi Penelitian',sks:2,topics:'Rumusan masalah, studi literatur, proposal TA',diff:3,tools:['Mendeley','LaTeX'],res:'https://www.youtube.com/results?search_query=metodologi+penelitian+teknik',tags:['t-soft'],prereqs:[],year:4,accent:'var(--y4)'},
  {id:'ta',sem:8,name:'Tugas Akhir (Skripsi)',sks:6,topics:'Penelitian mandiri: rancang, implementasi, uji, sidang',diff:5,tools:['Semua tools relevan'],res:'',tags:['t-soft'],prereqs:['seminar'],year:4,accent:'var(--y4)'},
  {id:'mantek',sem:8,name:'Manajemen & Ekonomi Teknik',sks:3,topics:'Analisis biaya, NPV, IRR, project management',diff:2,tools:['Excel','MS Project'],res:'',tags:['t-soft'],prereqs:[],year:4,accent:'var(--y4)'},
];

const SEMESTER_META = {
  1:{title:'Fondasi Sains & Matematika',sks:20,year:1},
  2:{title:'Sains Lanjut & Pemrograman',sks:20,year:1},
  3:{title:'Inti Elektro & Matematika Teknik',sks:20,year:2},
  4:{title:'Sinyal, Sistem & Mesin Listrik',sks:20,year:2},
  5:{title:'Sistem Kendali, Embedded & Telkom',sks:20,year:3},
  6:{title:'Spesialisasi & Aplikasi Lanjut',sks:18,year:3},
  7:{title:'Mata Kuliah Pilihan & Magang',sks:18,year:4},
  8:{title:'Tugas Akhir & Kelulusan',sks:16,year:4},
};

const YEAR_COLORS = {1:'var(--y1)',2:'var(--y2)',3:'var(--y3)',4:'var(--y4)'};

const DIFF_LABELS = {1:'Ringan',2:'Mudah',3:'Sedang',4:'Berat',5:'Boss'};
const DIFF_COLORS = {1:'var(--diff-easy)',2:'var(--diff-easy)',3:'var(--diff-med)',4:'var(--diff-hard)',5:'var(--diff-boss)'};

const CAREERS = [
  {
    icon:'âš¡',title:'Power Systems Engineer',color:'#fbbf24',
    salary:'Rp 8â€“25 jt/bulan',
    desc:'Merancang & mengoperasikan sistem transmisi/distribusi listrik',
    keyMKs:['rl1','rl2','mesin','tenaga','eldaya','ebt'],
    allMKs:['rl1','rl2','mesin','tenaga','eldaya','ebt','emag1'],
    companies:['PLN','Pertamina','Chevron','Siemens','ABB','GE Energy'],
  },
  {
    icon:'ğŸ“¡',title:'Telecommunications Engineer',color:'#22d3ee',
    salary:'Rp 8â€“30 jt/bulan',
    desc:'Mengembangkan sistem komunikasi & jaringan nirkabel',
    keyMKs:['ss','telkom','komdig','dsp','emag2'],
    allMKs:['ss','telkom','komdig','dsp','emag2','kal2'],
    companies:['Telkomsel','Indosat','XL','Nokia','Ericsson','Huawei'],
  },
  {
    icon:'ğŸ¤–',title:'Embedded Systems / IoT Engineer',color:'#a78bfa',
    salary:'Rp 7â€“20 jt/bulan',
    desc:'Mengembangkan firmware, hardware embedded, & IoT devices',
    keyMKs:['digital','mikro','code','iot','ss'],
    allMKs:['digital','mikro','code','iot','ss','elek1','elek2'],
    companies:['Bosch','Continental','Infineon','Startup IoT','Gojek','Tokopedia'],
  },
  {
    icon:'ğŸ¦¾',title:'Control & Automation Engineer',color:'#34d399',
    salary:'Rp 8â€“28 jt/bulan',
    desc:'Merancang sistem kendali otomatis, robotik, & PLC industri',
    keyMKs:['kendali','kendaliadv','robotik','mikro','ss'],
    allMKs:['kendali','kendaliadv','robotik','mikro','ss','mattek2'],
    companies:['Astra','PTDI','Toyota','Festo','Omron','Schneider'],
  },
  {
    icon:'ğŸ§ ',title:'AI / Machine Learning Engineer',color:'#e879f9',
    salary:'Rp 12â€“50 jt/bulan',
    desc:'Membangun model AI untuk vision, sinyal, & sistem cerdas',
    keyMKs:['ml','dsp','code','ss'],
    allMKs:['ml','dsp','code','ss','aljabar','mattek2'],
    companies:['Google','Microsoft','Gojek','Tokopedia','Startup AI','BRIN'],
  },
  {
    icon:'ğŸ”Œ',title:'Electronics Design Engineer',color:'#fb923c',
    salary:'Rp 7â€“22 jt/bulan',
    desc:'Merancang PCB, sirkuit analog/digital, IC, & prototyping',
    keyMKs:['elek1','elek2','digital','eldaya','emag1'],
    allMKs:['elek1','elek2','digital','eldaya','emag1','rl1','rl2'],
    companies:['Texas Instruments','NXP','Renesas','Samsung','LG Electronics'],
  },
  {
    icon:'ğŸŒ',title:'Renewable Energy Engineer',color:'#4ade80',
    salary:'Rp 8â€“25 jt/bulan',
    desc:'Merancang sistem energi surya, angin, & penyimpanan energi',
    keyMKs:['ebt','tenaga','eldaya','mesin'],
    allMKs:['ebt','tenaga','eldaya','mesin','rl2'],
    companies:['PLN NP','SolarEdge','Vestas','PLTS lokal','Schneider','Sinar Mas'],
  },
  {
    icon:'ğŸ“»',title:'RF / Antenna Engineer',color:'#f472b6',
    salary:'Rp 9â€“30 jt/bulan',
    desc:'Merancang antena, RF circuit, radar, & wireless system',
    keyMKs:['emag1','emag2','telkom','komdig'],
    allMKs:['emag1','emag2','telkom','komdig','rl2'],
    companies:['Ericsson','Nokia','Huawei','Lockheed','PT LEN','LAPAN'],
  },
];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// RENDER ROADMAP
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderRoadmap() {
  const container = document.getElementById('roadmap-container');
  let html = '';
  let currentYear = 0;
  for (let sem = 1; sem <= 8; sem++) {
    const meta = SEMESTER_META[sem];
    const yearColor = YEAR_COLORS[meta.year];
    if (meta.year !== currentYear) {
      currentYear = meta.year;
      const yearNames = {1:'TAHUN PERTAMA',2:'TAHUN KEDUA',3:'TAHUN KETIGA',4:'TAHUN KEEMPAT'};
      html += `<div class="year-header">
        <div class="year-line"></div>
        <span class="year-label-txt">${yearNames[meta.year]}</span>
        <div class="year-line"></div>
      </div>`;
    }
    const mks = MK.filter(m => m.sem === sem);
    const isFirst = (sem === 1);
    html += `<div class="sem-row">
      <div class="sem-spine">
        <div class="sem-dot" style="color:${yearColor};border-color:${yearColor}">${sem}</div>
        <div class="sem-line"></div>
      </div>
      <div class="sem-card ${isFirst?'open':''}" id="sem-card-${sem}">
        <div class="sem-card-head" onclick="toggleCard(${sem})">
          <span class="sem-title-txt">${meta.title}</span>
          <span class="sem-sks-badge">${meta.sks} SKS</span>
          <span class="chevron">â–¼</span>
        </div>
        <div class="mk-list">
          ${mks.map(mk => renderMKCard(mk)).join('')}
        </div>
      </div>
    </div>`;
  }
  container.innerHTML = html;
}

function renderMKCard(mk) {
  const diffColor = DIFF_COLORS[mk.diff];
  const diffBars = Array.from({length:5},(_,i)=>
    `<div class="diff-bar ${i<mk.diff?'filled':''}" style="--diff-color:${diffColor}"></div>`
  ).join('');
  const toolsHTML = mk.tools.length > 0
    ? `<div class="tools-row">${mk.tools.map(t=>`<span class="tool-chip">${t}</span>`).join('')}</div>`
    : '';
  const resHTML = mk.res
    ? `<a class="mk-res" href="${mk.res}" target="_blank">ğŸ“– Resource â†—</a>`
    : '';
  const tagsHTML = mk.tags.map(t=>`<span class="mk-tag ${t}">${t.replace('t-','')}</span>`).join('');
  const prereqBadge = mk.prereqs.length > 0
    ? `<span class="dep-badge">âŸ¶ ${mk.prereqs.length} prereq</span>` : '';

  return `<div class="mk-card" id="mkc-${mk.id}" style="--accent:${mk.accent}" data-id="${mk.id}">
    <span class="mk-sks">${mk.sks} SKS</span>
    <div class="mk-name">${mk.name}</div>
    <div class="mk-topics">${mk.topics}</div>
    <div class="diff-row">
      <span class="diff-label">Kesulitan</span>
      <div class="diff-bars">${diffBars}</div>
      <span style="font-family:'DM Mono',monospace;font-size:9px;color:${diffColor};margin-left:4px">${DIFF_LABELS[mk.diff]}</span>
    </div>
    <div class="mk-tags">${tagsHTML}</div>
    ${toolsHTML}
    ${resHTML}
    ${prereqBadge}
  </div>`;
}

function toggleCard(sem) {
  document.getElementById(`sem-card-${sem}`).classList.toggle('open');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// DEPENDENCY GRAPH (Canvas)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const NODE_COLORS_HEX = {1:'#22d3ee',2:'#a78bfa',3:'#fb923c',4:'#34d399'};

function getNodePositions() {
  const canvas = document.getElementById('depCanvas');
  const W = canvas.width, H = canvas.height;
  const semCols = {1:0,2:1,3:2,4:3,5:4,6:5,7:6,8:7};
  const semCount = {};
  MK.forEach(m => { semCount[m.sem] = (semCount[m.sem]||0)+1; });
  const semIndex = {};
  const positions = {};
  MK.forEach(m => {
    semIndex[m.sem] = (semIndex[m.sem]||0);
    const col = semCols[m.sem];
    const total = semCount[m.sem];
    const colW = W / 8;
    const x = col * colW + colW/2;
    const row = semIndex[m.sem];
    const rowH = (H - 80) / (total);
    const y = 40 + row * rowH + rowH/2;
    positions[m.id] = {x, y, mk: m};
    semIndex[m.sem]++;
  });
  return positions;
}

let depPositions = {};
let selectedNode = null;

function drawDep(highlight=null) {
  const canvas = document.getElementById('depCanvas');
  const ctx = canvas.getContext('2d');
  const W = canvas.width, H = canvas.height;
  ctx.clearRect(0,0,W,H);

  // Column labels (semester numbers)
  ctx.font = '500 10px DM Mono';
  ctx.fillStyle = '#64748b';
  ctx.textAlign = 'center';
  for(let s=1;s<=8;s++){
    const colW = W/8;
    ctx.fillText(`S${s}`, (s-1)*colW+colW/2, H-8);
  }

  // Draw edges
  MK.forEach(mk => {
    mk.prereqs.forEach(prereqId => {
      const from = depPositions[prereqId];
      const to = depPositions[mk.id];
      if (!from || !to) return;

      const isHighlighted = highlight && (highlight.id === mk.id || highlight.id === prereqId || (highlight.prereqs&&highlight.prereqs.includes(prereqId)));
      const alpha = highlight ? (isHighlighted ? 0.9 : 0.08) : 0.25;

      ctx.beginPath();
      ctx.moveTo(from.x, from.y);
      // Bezier curve
      const cpx = (from.x + to.x) / 2;
      ctx.bezierCurveTo(cpx, from.y, cpx, to.y, to.x, to.y);
      ctx.strokeStyle = isHighlighted
        ? `rgba(251,191,36,${alpha})`
        : `rgba(148,163,184,${alpha})`;
      ctx.lineWidth = isHighlighted ? 2 : 1;
      ctx.stroke();

      // Arrowhead
      const arrowSize = 5;
      const angle = Math.atan2(to.y - from.y, to.x - from.x);
      ctx.beginPath();
      ctx.moveTo(to.x - 12*Math.cos(angle), to.y - 12*Math.sin(angle));
      ctx.lineTo(
        to.x - 12*Math.cos(angle) - arrowSize*Math.cos(angle-0.5),
        to.y - 12*Math.sin(angle) - arrowSize*Math.sin(angle-0.5)
      );
      ctx.lineTo(
        to.x - 12*Math.cos(angle) - arrowSize*Math.cos(angle+0.5),
        to.y - 12*Math.sin(angle) - arrowSize*Math.sin(angle+0.5)
      );
      ctx.closePath();
      ctx.fillStyle = `rgba(251,191,36,${alpha})`;
      ctx.fill();
    });
  });

  // Draw nodes
  MK.forEach(mk => {
    const pos = depPositions[mk.id];
    if (!pos) return;
    const color = NODE_COLORS_HEX[mk.year];
    const isSelected = selectedNode && selectedNode.id === mk.id;
    const isPrereq = highlight && highlight.prereqs && highlight.prereqs.includes(mk.id);
    const isDim = highlight && !isSelected && !isPrereq && highlight.id !== mk.id;

    const r = isSelected ? 26 : 20;
    const alpha = isDim ? 0.2 : 1;

    // Glow
    if (isSelected || isPrereq) {
      ctx.beginPath();
      ctx.arc(pos.x, pos.y, r+6, 0, Math.PI*2);
      const grad = ctx.createRadialGradient(pos.x,pos.y,r,pos.x,pos.y,r+8);
      grad.addColorStop(0, isSelected?'rgba(251,191,36,0.4)':'rgba(167,139,250,0.3)');
      grad.addColorStop(1,'transparent');
      ctx.fillStyle = grad;
      ctx.fill();
    }

    // Circle
    ctx.beginPath();
    ctx.arc(pos.x, pos.y, r, 0, Math.PI*2);
    ctx.fillStyle = `rgba(5,7,9,${alpha})`;
    ctx.fill();
    ctx.strokeStyle = isSelected ? '#fbbf24' : isPrereq ? '#a78bfa' : color;
    ctx.lineWidth = isSelected ? 2.5 : 1.5;
    ctx.globalAlpha = alpha;
    ctx.stroke();
    ctx.globalAlpha = 1;

    // SKS indicator
    ctx.beginPath();
    ctx.arc(pos.x, pos.y, r * (mk.sks/6), 0, Math.PI*2);
    ctx.fillStyle = isSelected
      ? `rgba(251,191,36,0.15)`
      : `${color}18`;
    ctx.fill();

    // Text
    ctx.globalAlpha = isDim ? 0.2 : 1;
    ctx.fillStyle = isSelected ? '#fbbf24' : '#e2e8f0';
    ctx.font = `${isSelected?'600':'400'} ${isSelected?'8.5':'7.5'}px DM Sans`;
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';

    // Wrap text
    const words = mk.name.split(' ');
    if (words.length <= 2) {
      ctx.fillText(mk.name.length > 10 ? mk.name.substring(0,9)+'â€¦' : mk.name, pos.x, pos.y);
    } else {
      const line1 = words.slice(0,2).join(' ');
      const line2 = words.slice(2).join(' ');
      ctx.fillText(line1.length > 11 ? line1.substring(0,10)+'â€¦' : line1, pos.x, pos.y - 4);
      ctx.fillText(line2.length > 11 ? line2.substring(0,10)+'â€¦' : line2, pos.x, pos.y + 5);
    }
    ctx.globalAlpha = 1;
    ctx.textBaseline = 'alphabetic';
  });
}

function initDepGraph() {
  const canvas = document.getElementById('depCanvas');
  depPositions = getNodePositions();
  drawDep();

  canvas.addEventListener('mousemove', (e) => {
    const rect = canvas.getBoundingClientRect();
    const scaleX = canvas.width / rect.width;
    const scaleY = canvas.height / rect.height;
    const mx = (e.clientX - rect.left) * scaleX;
    const my = (e.clientY - rect.top) * scaleY;
    const tooltip = document.getElementById('tooltip');

    let hovered = null;
    for (const [id, pos] of Object.entries(depPositions)) {
      const dist = Math.sqrt((mx-pos.x)**2+(my-pos.y)**2);
      if (dist < 22) { hovered = pos.mk; break; }
    }

    if (hovered) {
      canvas.style.cursor = 'pointer';
      const prereqNames = hovered.prereqs.map(pid => {
        const pmk = MK.find(m=>m.id===pid);
        return pmk ? pmk.name : pid;
      });
      tooltip.style.display = 'block';
      tooltip.style.left = (e.clientX + 14) + 'px';
      tooltip.style.top = (e.clientY - 10) + 'px';
      tooltip.innerHTML = `<strong>${hovered.name}</strong>
        <div>SKS: ${hovered.sks} Â· ${DIFF_LABELS[hovered.diff]}</div>
        ${prereqNames.length ? `<div class="tt-deps">Butuh: ${prereqNames.join(', ')}</div>` : '<div class="tt-deps">Tidak ada prereq</div>'}
        ${hovered.tools.length ? `<div style="color:#94a3b8;font-size:10px;margin-top:3px">${hovered.tools.join(', ')}</div>` : ''}`;
      drawDep(hovered);
    } else {
      canvas.style.cursor = 'default';
      tooltip.style.display = 'none';
      if (!selectedNode) drawDep();
      else drawDep(selectedNode);
    }
  });

  canvas.addEventListener('click', (e) => {
    const rect = canvas.getBoundingClientRect();
    const scaleX = canvas.width / rect.width;
    const scaleY = canvas.height / rect.height;
    const mx = (e.clientX - rect.left) * scaleX;
    const my = (e.clientY - rect.top) * scaleY;

    let clicked = null;
    for (const [id, pos] of Object.entries(depPositions)) {
      const dist = Math.sqrt((mx-pos.x)**2+(my-pos.y)**2);
      if (dist < 22) { clicked = pos.mk; break; }
    }

    if (clicked) {
      if (selectedNode && selectedNode.id === clicked.id) {
        selectedNode = null;
        drawDep();
      } else {
        selectedNode = clicked;
        drawDep(clicked);
      }
    }
  });

  canvas.addEventListener('mouseleave', () => {
    document.getElementById('tooltip').style.display = 'none';
    if (selectedNode) drawDep(selectedNode);
    else drawDep();
  });
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CAREER MAP
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderCareer() {
  const grid = document.getElementById('career-grid');
  grid.innerHTML = CAREERS.map(c => {
    const keyMKHtml = c.allMKs.map(mkId => {
      const mk = MK.find(m=>m.id===mkId);
      if (!mk) return '';
      const isKey = c.keyMKs.includes(mkId);
      return `<span class="career-mk ${isKey?'key':''}">${mk.name}</span>`;
    }).join('');

    const compHtml = c.companies.map(comp=>
      `<span class="company-tag">${comp}</span>`
    ).join('');

    return `<div class="career-card" style="--career-color:${c.color}">
      <div class="career-head" style="--career-color:${c.color}">
        <span class="career-icon">${c.icon}</span>
        <div class="career-title">${c.title}</div>
        <div class="career-salary">${c.salary}</div>
      </div>
      <div class="career-body">
        <p style="font-size:12px;color:var(--muted2);margin-bottom:12px;line-height:1.5">${c.desc}</p>
        <div class="career-section-title">Mata Kuliah Kunci</div>
        <div class="career-mks">${keyMKHtml}</div>
        <div class="career-section-title">Perusahaan / Industri</div>
        <div class="career-companies">${compHtml}</div>
      </div>
    </div>`;
  }).join('');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// VIEW SWITCHER
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function switchView(v) {
  document.querySelectorAll('.view').forEach(el => el.classList.remove('active'));
  document.querySelectorAll('.tab').forEach(el => el.classList.remove('active'));
  document.getElementById(`view-${v}`).classList.add('active');
  event.currentTarget.classList.add('active');
  if (v === 'dependency') {
    setTimeout(() => initDepGraph(), 50);
  }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// INIT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
renderRoadmap();
renderCareer();
</script>
</body>
</html>
